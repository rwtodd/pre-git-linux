(also includes notes from the the 0.98 patches, since they are not in this repo)

Date:   Sun Dec 13 12:00:00 1992 -0800

    [PATCH] Linux-0.99 (December 13, 1992)
    
    net-1: paranoid queue checking to find more bugs.
    
    configuration script version #1.
    
    NFS filesystem client support by Rick Sladkey!
    
    [Original announcement below]
    
    0.99 has no major new features: the NFS client code is now in the
    standard distribution, and the kernel configuration has changed, but
    most of the rest of the changes are fixes - especially the tcp code
    should now be pretty stable (knock wood).
    
    Changes:
    
     - NFS is in. As are some stubs for the soud drivers, although it's only
       stubs right now.
     - various fixes around the place: the serial problems are hopefully
       gone, and there are patches to both TCP/IP and SCSI to make them more
       stable.
     - Minor fixes: the keyboard buglet introduced in 0.98pl6 should be
       gone, and some other bugs are also corrected.  The optimized
       read-ahead code in the filesystems (and the raw device read code) was
       too complicated and seemed to have problems with bad blocks, so I
       rewrote it, and it should hopefully work correctly now (this may have
       been the reason "mkfs -c" didn't work in all cases).  Thanks for some
       good bug-reports I've gotten: I've tried to correct all the problems
       I got reports on.
     - The kernel configuration has been re-thought: I decided to take
       advantage of the possibilities offered by GNU make etc.  This means
       that you no longer can compile the kernel using any other make, but
       there probably aren't many (if any) people doing that anyway.  This
       way I got rid of the extremely ugly SCSI setup, so it was probably
       worth it.
    
    To configure the kernel for your setup, do a
    
            make config
    
    and answer the yes/no questions. After that, do a
    
            make dep
    
    to make the dependencies match your setup.  After that you should still
    go edit the top-level Makefile for some of the configuration information
    as before, but the remaining config things are pretty simple.  Then you
    can make the kernel with a simple "make Image".
    
    The new configuration utility (essentially a stupid shell script coupled
    with some smarts in the Makefiles) tries to minimize compilations: if
    you disable the SCSI code the scsi drivers won't even be compiled, much
    less linked in.  This should be a win on slower machines.
    
    NOTE!!! Use LILO-0.7 to load the 0.98pl5 and newer kernels: any older
    version of lilo is liable to result in weird problems.
    
                    Linus

Date:   Wed Dec 2 12:00:00 1992 -0800

    [PATCH] Linux-0.98.6 (December 2, 1992)
    
    Kai Makisara does the SCSI tape driver.  He's one of the few original
    maintainers still around as such..
    
    isofs introduced by Eric Youngdale, based on the minixfs code.  Eric was
    a physicist, and you can tell he was new to C - he has been
    Pascal-damaged, and has extra semi-colons at the end of block
    statements.  But soon he ended up being one of the core maintainers
    anyway, and took over SCSI maintenance.
    
    More aggressive filesystem read-ahead introduced.
    
    [Original announcement below]
    
    Anyway, 0.98pl6 is hopefully the last release before 0.99: there are a
    few known problems left in this release.  Most notable is the serial
    code: it works for most people, but others still have problems with it.
    I hope this will get fixed within a week (tytso is working on it).  It
    also seems as if the PS/2 mouse code has some problems.
    
    pl6 contains these fixes:
    
     - all the tcp/ip patches I've received (and I fixed one bug that
       gcc-2.3 seems to have found).
     - math-emu patch for the problem that resulted in FPU errors with some
       operations.
     - I fixed gcc-2.3 warnings as well as most of the old warnings.  You
       shouldn't get more than one or two warnings when recompiling the
       whole kernel.
     - /proc filesystem extensions.  Based on ideas (and some code) by
       Darren Senn, but mostly written by yours truly.  More about that
       later.
     - some tty_io fixes (there was a bug in the /dev/console handling when
       you changed VC's while using the general console device).
     - re-organization of the keyboard-driver internal data-structures.  The
       changes are mostly preliminary: they change the keyboard flags to be
       more easily adaptive to a reprogrammable keyboard driver.  No actual
       new features yet.
     - new SCSI drivers: reportedly much faster than the old ones (but not
       all drivers take advantage of it yet..)
     - various other fixes: pty's etc have minor changes.
    
    I hope to make 0.99 in a week or so, and 1.0 after that has been tested
    some.  I hope people will test out pl6 - 0.99 won't be much different,
    and if you don't test pl6, any bugs relating to your particular hardware
    may not be found in time for 0.99...
    
                    Linus

Date:   Sun Nov 15 12:00:00 1992 -0800

    [PATCH] Linux-0.98.5 (November 15, 1992)
    
    net-1: free_skb -> kfree_skb. More changelogs.
    
    [Original announcement below]
    
    0.98.5 mainly fixes the swap-partition bug that was present in pl4 (and
    for which I did an earlier unofficial emergency patch).  The bug
    resulted in incorrect swapping with a partition under some circumstances
    (notably tty events: keypresses could make xterm dump code when swapping
    was enabled etc).
    
    pl5 also has some other changes - nothing major.  Setting and querying
    termios information from a pty master will now set/query the slave info:
    this seems to be what some programs (telnet) expect.  I haven't seen any
    changes to any of the programs I use, but I'd like to hear if this
    results in problems or if it actually does help.
    
    NOTE! READ THIS AND PONDER:
    
    pl5 now checks against writing to the text segment.  Older binaries
    which used the original estdio library (used with the earliest gcc
    versions) are liable to break: not that there should be many of these
    binaries around.  So if you get "Segmentation fault (core dumped)" on
    binaries you know used to work, this is the likely cause.
    
    One problem spot that I've seen even with new binaries is due to a
    library bug in 'sigaction()'.  If the second argument is NULL (ie the
    pointer to the new sigaction structure), sigaction() will incorrectly
    dereference it resulting in a core-dump.  The only program so far that
    I've seen doing this is 'dd', but there may be others.
    
    On my system I have found a whopping total of two binaries which didn't
    like the text segment protection, so it shouldn't really be a major
    problem for anybody.  Famous last words.
    
                    Linus
    
    PS. The strace code in pl4 was incorrectly credited in the announcement.
    The code was written by Branko Lankester, not Ross Biro (who did the
    tcp/ip changes).

Date:   Mon Nov 9 12:00:00 1992 -0800

    [PATCH] Linux-0.98.4 (November 9, 1992)
    
    Rename "malloc()/free()" as "kmalloc()/kfree()" to make people more
    aware of some of the limitations.
    
    Math emulator updates to handle the case that Linux (unlike the original
    djgpp target) can get preempted by user space accesses.
    
    Make "ll_rw_blk()" take an array of blocks to read/write.
    
    VFS "notify_change()" callback, to allow the low-level filesystem to
    decide what it wants to do about metadata changes.
    
    Deprecate old "stat()" call by printing out a warning on use.
    
    NR_OPEN is now 256 files per process, and the old "unsigned long" bitops
    needed to go away. This causes lots of syntactic changes in select().
    
    System call tracing implemented for ptrace().
    
    [Original announcement below]
    
     - the inode caching bug (resulting in bad filesystem info when
       mounting/umounting devices) should be gone for good.
    
     - an elusive race-condition in the fs is fixed: this may have been the
       reason some people got fsck errors once in a while.  The
       race-condition was pretty hard to find, and depends on a lot of
       things (buffer cache size, speed of the disk and computer speed).
    
     - fpu emulator patches (mainly for the re-entrancy problem) by me and
       W. Metzenthen.
    
     - various wait-queue changes - the kernel uses the waiting mechanism
       more efficiently now.
    
     - the NFS client support code is there: the actual nfs code is still in
       alpha (although reported to be pretty stable) and has to be gotten
       separately.
    
     - NR_OPEN was changed from 32 to 256 (which is what SunOS seems to use,
       so I hope it won't need any further changes).  This has lead to some
       incompatibilities (GNU emacs and the term program seem to need
       recompilation to work correctly), as the 'select()' system call has a
       slightly changed interface due to the new fd_set definition.
    
     - the process kernel stack is now on a separate page (needed due to the
       fact that the task_struct has now grown to almost 3kB due to the
       NR_OPEN changes).  This also means 'ps' needs patches..  My patches
       to ps-0.98 are available as 'ps-diff.Z' in the same directory as the
       kernel sources and diffs.
    
     - various other changes: system call tracing by Ross Biro. Changed
       ll_rw_block interface (performance reasons: it will eventually be
       changed to accept several requests at once).  Malloc() was changed
       and renamed to kmalloc() due to the new interface.  Some tcp/ip
       patches (inode counting correction and some other changes).
    
    0.98.4 should hopefully be pretty stable: the main problem areas are
    probably still tcp/ip and some of the tty code.  I'd appreciate
    comments, bug-reports etc.
    
                    Linus

Date:   Tue Oct 27 12:00:00 1992 -0800

    [PATCH] Linux-0.98.3 (October 27, 1992)
    
    More networking updates.. Ross Biro is still struggling with net-1.
    
    Michael Johnson (now RH kernel release manager) works on line printer
    driver.
    
    Locking function cleanups (for inodes, superblocks, buffer heads).  We
    also now pass in the superblock pointer instead of the device number to
    the filesystem routines.  That cleans up use and locking of
    "get_super()" a lot.
    
    [Original announcement below]
    
    Ok, I already sent out an announcement last night, but due to the time
    (6AM over here) I wasn't really in a mood to write a real annoucement.
    Here it is.
    
    linux-0.98.3 is available by anonymous ftp at least on nic.funet.fi:
    pub/OS/Linux/testing/Linus, both as context diffs against 0.98.2 and the
    pre-version of 0.98.3 and as complete source. The complete source
    package was done by directly applying the diffs - this means that the
    Makefile dependancies are probably not 100% up-to-date as I remove those
    from the diffs. It shouldn't be any problem, and you can always do a
    "make dep ; make clean" before actually compiling the kernel.
    
    0.98 pl3 fixes several bugs, and should remove all known NULL-pointer
    problems that made 0.98.2 unusable for most people. In addition to the
    NULL pointer fixes, the following things have changed:
    
    - removed most of the cli-sti pairs in the filesystem code by rewriting
      the locking routines to use a different algorithm, possible due to
      the rewritten wait-queue code that I did back in 0.96c or so.
      Interrupt latency should be better on slow machines, but I don't know
      if it's noticeable.
    - Minor 387-emulation fixes by Bill Metzenthen - only noticeable under
      special conditions.
    - Corrected various error-returns in the fs (thanks to Bruce Evans for
      running some error diagnostics). Error messages when opening (and
      renaming etc) files that had a non-directory in the path were wrong,
      and should be ok now (ie giving ENOTDIR instead of EACCESS or ENOENT).
      Some other problems reported by Bruce fixed.
    - Changed the interface for some fs-related functions due to cleaning
      up super-block handling. Most noticeably, iget() and related
      functions no longer specify the inode with a device and inode number,
      but instead with a super-block pointer and inode number. This is
      more logical, and should make unnamed devices (ie internal
      filesystems like nfs and /proc) cleaner. Also note that the calling
      sequence for sb->s_op->put_inode() also has changed since 0.98. This
      is of interest only if you are writing filesystem drivers..
    - ASK_SVGA was broken in 0.98.2 - it should be ok now.
    
    Also, various minor fixes as usual. No new features, but I hope 0.98.3
    will be a lot less bug-prone due to the changes since 0.98.1. Some
    minor tcp/ip corrections (but most of them were in the pre-release), and
    I removed a race-condition in the tty-handling code.
    
    Note that people who use math without a co-processor should certainly
    upgrade to 0.98.3: the new emulator is much better than my original one
    both in speed and accuracy/exception handling. x11perf is very much
    bearable now even without a 387, and things like ray-tracing etc
    shouldn't be a problem any more. It's slower than hardware fp, of
    course, but at least it works.
    
    The new emulator also means there is no reason for a separate soft-float
    library, so I'd assume that will be gone in the next gcc release for
    linux.
    
    As usual, a new kernel version probably means you'll have to recompile
    'ps' and friends. But at least the same 'ps' sources that worked for
    0.97.6 should still work.
    
                    Linus

Date:   Sun Oct 18 11:00:00 1992 -0800

    [PATCH] Linux-0.98.2 (October 18, 1992)
    
    Start virtualizing real mmap() functionlity in the kernel.  The first
    signs of me thinking about this already showed up as some unused header
    files earlier, this fleshes things out some more.  No actual filesystem
    code yet..
    
    This also removes my old simple math emulator, and introduces the new
    and much improved one from Bill Metzenthen.
    
    Bill originally wrote it for the djgpp suite (DJ Delories gcc port to
    DOS extenders).  It was much more accurate and well designed than my
    hackish one, and I was happy to throw my old code away.  The new math
    emulator also did things that I had never bothered with, notably the
    more complex i387 functions (exponentials and trig).
    
    I also fixed the static maximum memory limit: we now generate the kernel
    page tables dynamically rather than having a 16M or 32M static limit.
    
    SCSI updates: removable media support (which also implies re-reading the
    partition table etc)
    
    [Original announcement below]
    
    patch-2 is >150kB compressed, as it contains several big changes. Most
    notable are:
    
     - the new FPU-emulator by Bill Metzenthen.  It's bigger than the old
       one, but thanks to it, linux fpu emulation is no longer a quick hack,
       but a real emulator: it does all the 387(486) math instructions, and
       does them much faster than the old emulator + the soft library.
    
       The new math-emulator means that a separate soft-float library is no
       longer needed.  It also makes even a non-coprocessor system pretty
       useful for limited math-calcs - the complex functions are much faster
       when they no longer have to be calculated using simple functions, and
       even the simpler instructions that my old emulator handled are faster
       using the new one.
    
       The size of the new emulator may mean that people who have little
       RAM, but do have a coprocessor should probably recompile the kernel
       with the emulator disabled.
    
     - various minor mm fixes by me: trapping kernel NULL dereferences,
       cleaning up the page table initializations and the 16MB patches, and
       various other bugfixes.  get_free_page(GFP_ATOMIC) should preserve
       the interrupt flag, so malloc() should be safe now - hopefully no
       more of the tcp/ip memory management problems.
    
       The NULL pointer trapping may result in errors like:
            Unable to handle kernel paging request at address C0000???
            Oops: 0000
            ..... debugging info .....
    
       There were several NULL pointer dereferences in the serial and tty
       drivers, which should now be fixed.  I've also fixed any other errors
       I've seen, but if there are problems in the scsi drivers or similar
       things I cannot test, I'd like to hear about them.
    
     - scsi driver changes by Eric Youngdale.  Preliminary support for
       removable media, and some bug-fixes.  Due to white-space problems
       with eric's patches, the scsi patches are a bit bigger than
       necessary, but they should be ok even though I had to put them in
       partly by hand (and being unable to test them...)
    
     - The new tcp/ip patches that were sent to the NET channel not long
       ago.  Yes, they are alpha, but so is the whole tcp/ip directory, so I
       put them in even thought they haven't been extensively tested (and
       they did have a serious problem in the ioctl code, which I fixed).
    
     - psaux mouse patches by Dean Troyer, as well as the mouse.wait = NULL
       patch.
    
    Before (or after) patching, you should remove the old math-emulator (ie
    "rm -rf /usr/src/linux/kernel/math") as it is no longer needed.  You
    should also do a "make dep" to update dependencies: as usual, I edited
    out the dependancy-changes.  Do a "make clean", edit the main (and net)
    Makefiles to suit your system, and compile.
    
    And finally: I will no longer be making the bootdisks available -
    they'll be made by hlu/jwinstead and will probably be boot+root-disks
    using lilo, as done on the hlu disks.  That may mean that a bootimage
    won't be available at once, but most people who want to use the
    absolutely newest images probably compile them themselves anyway, so
    that shouldn't be a problem.
    
                    Linus

Date:   Mon Oct 5 11:00:00 1992 -0800

    [PATCH] Linux-0.98.1 (October 5, 1992)
    
    Add ATI XL busmouse driver by Bob Harris, split off MS busmouse driver into
    a driver of its own (rather than a subdriver of the Logitech mouse driver)
    
    FAT uid/gid/umask mount options.
    
    SCSI driver updates.
    
    [Original announcement below]
    
    Patch1 to 0.98 mainly corrects some driver problems: it contains the
    added "inb_p(HD_STATUS)" for hd.c, as well as a changed mouse driver
    setup (hope it works - I couldn't test it..).  There are also some SCSI
    driver patches: the seagate driver uses irqaction() to get irq's, and
    the aha1542 driver has the speedup patches.
    
    The bootimage should be compiled without the auto-SVGA mode, so people
    who had problems with linux automatically using a SVGA mode should be ok
    in this release.
    
                    Linus

